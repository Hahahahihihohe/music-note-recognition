import numpy as np
import matplotlib.pyplot as plt
from pydub import AudioSegment
import pyaudio
import struct
from scipy.fftpack import fft
from scipy.ndimage import uniform_filter1d
import tkinter
import librosa
import librosa.display
import os
def time_spectrum(file):

    x, sr = librosa.load(file)
    onset_frames = librosa.onset.onset_detect(y=x, sr=sr)
    onset_times = librosa.frames_to_time(onset_frames)
    plt.figure(figsize=(12, 8))
    librosa.display.waveshow(y=x, sr=sr, alpha=0.5)
    plt.vlines(onset_times, -1, 1, color='r', linestyle='--', label='Onset Times')
    plt.title('Detected Onsets')
    plt.xlabel('Time (s)')
    plt.legend()
    plt.show()
    print(onset_times.shape)
    return onset_times
def frequency_spectrum(x,frequency_list):
    audio = AudioSegment.from_file(x, format="wav")
    samples = np.array(audio.get_array_of_samples())
    samples = samples.reshape(-1,audio.channels).T
    sample_rate = audio.frame_rate
    sample_len = int(len(samples[0]) / sample_rate)  # do dai audio
    peak_detect = time_spectrum(x) #tao danh sach cac dinh
    print(peak_detect)
    for i in range(len(peak_detect)):
        if peak_detect[i] == peak_detect[-1]:
            new_sample = samples[0][int((peak_detect[i]-0.05) * sample_rate):-1]
        else:
            new_sample = samples[0][int((peak_detect[i]-0.05)*sample_rate):int(peak_detect[i+1]*sample_rate)]
        fft_window_size = len(new_sample)
        blackman_window = np.blackman(len(new_sample))
        new_sample = new_sample*blackman_window
        fft_new_sample = np.fft.fft(new_sample)
        frequency = np.fft.fftfreq(fft_window_size, d = 1/audio.frame_rate)
        sorted_amp = np.sort(np.abs(fft_new_sample[:fft_window_size // 2]))[::-1]
        if sorted_amp[0] < 50:
            continue
        sorted_indices = np.argsort(np.abs(fft_new_sample[:fft_window_size // 2]))[::-1]
        sorted_frequencies = np.abs(frequency[sorted_indices])
        sorted_amp = np.abs(sorted_amp)

        normalized_amp = sorted_amp / sorted_amp[0]
        #print(sorted_frequencies,normalized_amp)
        list = []
        for j,l in zip(sorted_frequencies,normalized_amp):
            if len(list) == 0:
                list.append((j,l))
            else:
                check = True
                for k,m in list:
                    if j < 1500:
                        if np.abs(j-k) < 15 or l < 0.1:
                            check = False
                            break
                    else:
                        if np.abs(j-k) < 30 or l < 0.1:
                            check = False
                            break
                if check:
                    list.append((j,l))
            if len(list) == 15:
                break
        while len(list) < 15:
            list.append((0,0))
        list = np.array(list)
        list = list.T
        x = evaluate(list,frequency_list)
        list = freq_to_note(notes,list)
        print('nốt nhạc đang chơi:',number_to_note(x), 'tại ', peak_detect[i],' s')
        print(list.shape)
        print('[\n[', end = '')
        for j in list[0]:
            print(j,end = ',')
        print('],\n[',end = '')
        np.set_printoptions(precision=3, suppress=True)
        for j in list[1]:
            print(j, end=',')
        print(']\n]')
        fig, axs = plt.subplots(2, 1)
        axs[0].plot(frequency[:fft_window_size // 2], np.abs(fft_new_sample[:fft_window_size // 2]) / sorted_amp[0])
        axs[0].set_xlim(0, 2000)
        axs[0].set_xlabel('Tần số (Hz)')
        axs[0].set_ylabel('Biên độ')

        axs[0].set_title('Biểu đồ tần số của tín hiệu tại thời điểm ' + str(peak_detect[i]) +' s')
        #print("note : ", number_to_note(x), ' at ', peak_detect[i], ' s')
        label = np.array(list[0], dtype=np.str_)
        value = np.array(list[1], dtype=float)
        colors = np.random.rand(len(label), 3)
        axs[1].bar(label,value,color=colors )
        axs[1].set_xlabel('nốt nhạc')
        axs[1].set_ylabel('biên độ')
        plt.tight_layout()
        plt.show()
    # final_array = np.load('music note.npy')
    # print(final_array)
def real_time_audio():
    CHUNK = 1024 * 2 #xu ly bao nhieu frame 1 luc
    FORMAT = pyaudio.paInt16 #byte per sample
    CHANNEL = 1 # dung micro
    RATE = 44100
    p = pyaudio.PyAudio()
    stream = p.open(format = FORMAT,
                    channels = CHANNEL,
                    rate= RATE,
                    input = True,
                    output = True,
                    frames_per_buffer=CHUNK)

    fig, (ax,ax2) = plt.subplots(2, figsize = (15,8))
    x = np.linspace(0,RATE, CHUNK)
    print(x)
    x_fft = np.linspace(0,RATE, CHUNK)
    line, = ax.plot(x,np.random.rand(CHUNK), '-', lw = 2)
    line_fft, = ax2.plot(x_fft,np.random.rand(CHUNK), '-', lw = 2)
    ax.set_xlim(0,4000)
    ax2.set_xlim(0,4000)
    ax.set_title("non filtered")
    ax2.set_title("filtered")
    while True:
        data = stream.read(CHUNK)  # lay du lieu tu mic
        data_int = np.frombuffer(data, dtype=np.int16)
        filtered_signal = uniform_filter1d(data_int, size = 200)
        Y_FFT = np.fft.fft(data_int)
        y_fft = np.fft.fft(filtered_signal)
        line.set_ydata(np.abs(Y_FFT[0:CHUNK]) /np.max(np.abs(Y_FFT[0:CHUNK])))
        line_fft.set_ydata(np.abs(y_fft[0:CHUNK]) /np.max(np.abs(y_fft[0:CHUNK])))
        sorted_indices = np.argsort(np.abs(y_fft[:CHUNK]))[::-1]
        dominant_frequency = 0
        for i in sorted_indices:
            if 20 <= np.abs(x_fft[i]) <= 4000:
                dominant_frequency = np.abs(x_fft[i])
                break
        print("Dominant Frequency:", dominant_frequency, "Hz")
        fig.canvas.draw()
        fig.canvas.flush_events()
        fig.show()
    p.close()

def number_to_note(x):
    if x == -1:
        return 'co cc'
    number = x % 12
    octive = int(x /12)
    note = ''
    #print(number,octive)
    if number == 0:
        note = 'C'
    if number == 1:
        note = 'C#'
    if number == 2:
        note = 'D'
    if number == 3:
        note = 'D#'
    if number == 4:
        note = 'E'
    if number == 5:
        note = 'F'
    if number == 6:
        note = 'F#'
    if number == 7:
        note = 'G'
    if number == 8:
        note = 'G#'
    if number == 9:
        note = 'A'
    if number == 10:
        note = 'A#'
    if number == 11:
        note = 'B'
    note += str(octive +3)
    return note

def evaluate(current_freq, freq_list):
    current_guess = -1 #dự đoán hiện tại
    max_accuracy = 99
    min_dif = 99
    match_freq = 0
    total_freq = 0
    non_zero_freq = 0
    for i in current_freq[0]:
        if i != 0:
            non_zero_freq += 1
    for i in range(len(freq_list)):
        #Số phần tử khác 0 trong nốt nhạc đang dùng để tham chiếu
        a = 0
        for j in freq_list[i][0]:
            if j != 0:
                a = a+1

        accuracy = 0 #Số tần số khớp giữa 2 phần tử
        total_dif = 0 #Tổng khác biệt
        for j in range(0,15):
            if current_freq[0][j] == 0: #nếu là tần số = 0 thì cook
                continue
            if current_freq[0][j] < 1200:
                x = 7
            else:
                x = 14
            check = False
            for k in range(0,15):
                if freq_list[i][0][k] == 0: #nếu là tần số = 0 thì cook
                    continue
                if abs(current_freq[0][j] - freq_list[i][0][k]) < x:
                    if (freq_list[i][1][k] > 0.4 and current_freq[1][j] < 0.2) \
                    or (freq_list[i][1][k] < 0.2 and current_freq[1][j] > 0.2): #Loại bỏ những trường hợp nhiễu
                        continue
                    accuracy += 1
                    total_dif += abs(current_freq[1][j] - freq_list[i][1][k])
                    check = True
                    break

            if not check:
                total_dif += current_freq[1][j]*2
        # đánh giá kết quả dựa trên trung bình độ khác biệt của tất cả các tần số đỉnh
        final_accuracy = (total_dif + (a - accuracy)*2) / (accuracy + (a-accuracy)*2+ (non_zero_freq-accuracy)*2)
        if final_accuracy > 0.8:
            continue
        if max_accuracy > final_accuracy:
            max_accuracy = final_accuracy
            current_guess = i
    if max_accuracy == -99:
        return -1
    print('acc =',1- max_accuracy)
    return current_guess
def freq_to_note(note,list):
    res = []
    for i in range(0,15):
        if list[0][i] == 0:
            continue
        if list[0][i] <= 126:
            multi = 0
        elif list[0][i] <= 252:
            multi = 1
        elif list[0][i] <= 504:
            multi = 2
        elif list[0][i] <= 1020:
            multi = 3
        else:
            multi = 4
        nearest_note = 'unknown'
        nearest_dis = 999
        for j in range(0+12*multi,12+12*multi):
            cur_dis = np.abs(list[0][i] - note[1][j])
            if cur_dis < nearest_dis:
                nearest_note = note[0][j]
                nearest_dis = cur_dis
        res.append([nearest_note,list[1][i]])
    res = np.array(res)
    res = res.T
    return res

notes = [
        ['C2','C#2/Db2','D2','D#2/Eb2','E2','F2','F#2/Gb2','G2','G#2/Ab2','A2','A#2/Bb2','B2',
         'C3','C#3/Db3','D3','D#3/Eb3','E3','F3','F#3/Gb3','G3','G#3/Ab3','A3','A#3/Bb3','B3',
         'C4','C#4/Db4','D4','D#4/Eb4','E4','F4','F#4/Gb4','G4','G#4/Ab4','A4','A#4/Bb4','B4',
         'C5','C#5/Db5','D5','D#5/Eb5','E5','F5','F#5/Gb5','G5','G#5/Ab5','A5','A#5/Bb5','B5',
         'C6','C#6/Db6','D6','D#6/Eb6','E6','F6','F#6/Gb6','G6','G#6/Ab6','A6','A#6/Bb6','B6',],
        [65.40,69.29,73.41,77.78,82.40,87.30,92.49,97.99,103.82,110.00,116.54,123.47,
         130.8, 138.58, 146.82, 155.56, 164.8, 174.6, 184.98, 195.98, 207.64, 220.0, 233.08, 246.94,
         261.6, 277.16, 293.64, 311.12, 329.6, 349.2, 369.96, 391.96, 415.28, 440.0, 466.16, 493.88,
         523.2, 554.32, 587.28, 622.24, 659.2, 698.4, 739.92, 783.92, 830.56, 880.0, 932.32, 987.76,
         1046.4, 1108.64, 1174.56, 1244.48, 1318.4, 1396.8, 1479.84, 1567.84, 1661.12, 1760.0, 1864.64, 1975.52
         ]
    ]
frequency = [
    [ #C3
        [ 132.0,260.0,1312.0,1448.0,784.0,916.0,524.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0],
        [1.0,0.7200262637702836,0.17167613209640142,0.1311539223634592,0.1290251573181668,0.12033666228325784,0.10462146695100706,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0]
    ],
    [ #C3#
        [276.0,140.0,416.0,692.0,972.0,832.0,556.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0],
        [1.0,0.5348437806746957,0.40534371013897874,0.27710201569670206,0.2524043970410891,0.19051655531182496,0.1178572643225341,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0]
    ],
    [ #D3
        [148.0,588.0,292.0,736.0,440.0,884.0,1476.0,2232.0,1928.0,1180.0,1628.0,0.0,0.0,0.0,0.0],
        [1.0,0.6545713700035397,0.5047022145988891,0.48320884720152807,0.3286283870995963,0.2670588226692592,0.2662070776875273,0.1510662942240137,0.12821541775124742,0.12275261535921742,0.10615344209710181,0.0,0.0,0.0,0.0]
    ],
    [ #D3#
        [468.0,156.0,1092.0,780.0,624.0,936.0,1564.0,312.0,1884.0,0.0,0.0,0.0,0.0,0.0,0.0],
        [1.0,0.7178994918169799,0.36606573476554544,0.21834008792619344,0.21080261293830058,0.19178239117711315,0.17005763831406112,0.16850668062214438,0.15819444840105984,0.0,0.0,0.0,0.0,0.0,0.0]
    ],
    [ #E3
        [164.0,328.0,496.0,824.0,1324.0,1156.0,660.0,1492.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0],
        [1.0,0.9243224568929788,0.6196245099955001,0.47248060322353563,0.2032235552496527,0.19105209590309633,0.16938447037028653,0.10606668978162356,0.0,0.0,0.0,0.0,0.0,0.0,0.0]
    ],
    [ #F3
        [176.0,348.0,524.0,700.0,1048.0,1228.0,876.0,1404.0,1580.0,0.0,0.0,0.0,0.0,0.0,0.0],
        [1.0,0.9131743651531588,0.5583096914618354,0.5396652242829889,0.45451159868816016,0.41851155219378394,0.41198267621050505,0.19034224419785198,0.1418682444384942,0.0,0.0,0.0,0.0,0.0,0.0]
    ],
    [ #F3#
        [184.0,556.0,1300.0,372.0,740.0,928.0,1112.0,1868.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0],
        [1.0,0.34583742068029427,0.3107083291276866,0.2786519742071319,0.27044767832614225,0.20968341805862376,0.16019982328714208,0.11332866558933176,0.0,0.0,0.0,0.0,0.0,0.0,0.0]
    ],
    [#G3
        [196.0,392.0,784.0,588.0,1380.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0],
        [1.0,0.5247947516270538,0.3947790288065071,0.35200462771552915,0.12313977559556691,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0]
    ],
    [ #G3#
        [208.0,624.0,416.0,832.0,1040.0,1460.0,1672.0,1884.0,1252.0,0.0,0.0,0.0,0.0,0.0,0.0],
        [1.0,0.8772919501458767,0.7666031984696393,0.521032902664831,0.3452838560477866,0.31595311310944824,0.2696011161689022,0.24060593989527865,0.1988610133864909,0.0,0.0,0.0,0.0,0.0,0.0]
    ],
    [ #A3
        [220.0,440.0,1104.0,1324.0,660.0,880.0,1548.0,1772.0,2000.0,0.0,0.0,0.0,0.0,0.0,0.0],
        [1.0,0.6658162444231267,0.5073898259501074,0.47088476465849394,0.4630641874940751,0.23801547155240896,0.16844620580607347,0.1299074312141556,0.1152292020122724,0.0,0.0,0.0,0.0,0.0,0.0]
    ],
    [ #A3#
        [468.0,700.0,1168.0,232.0,1640.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0],
        [1.0,0.2696331650899376,0.23158804399333935,0.22846652121900202,0.1286660137604602,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0]
    ],
    [ #B3
        [248.0,492.0,740.0,988.0,1240.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0],
        [1.0,0.7316655406032556,0.4964208575399726,0.30631781932332414,0.20650052875946975,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0]
    ],
    [ #C4
        [260.0,784.0,524.0,1844.0,1312.0,1048.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0],
        [1.0,0.6855360272409078,0.5409477040905276,0.3526227938518186,0.3145133636603227,0.25864895089335493,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0]
    ],
    [ #C4#
        [276.0,556.0,1112.0,832.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0],
        [1.0,0.740178621137022,0.26781897845794267,0.25518703587352565,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0]
    ],
    [ #D4
        [588.0,292.0,880.0,1176.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0],
        [1.0,0.7819191384063646,0.3337404563237112,0.2179054953915831,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0]
    ],
    [ #D4thang
        [1.0,0.7819191384063646,0.3337404563237112,0.2179054953915831,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0],
        [1.0,0.410163322329747,0.18451553553359817,0.16295635044702114,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0]
    ],
    [ #E4
        [328.0,660.0,992.0,1324.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0],
        [1.0,0.4007068722290132,0.14711866065863485,0.1438923068303876,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0]
    ],
    [ #F4
        [348.0,700.0,1052.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0],
        [1.0,0.17758924704780257,0.13931499393536245,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0]
    ],
    [ #F4#
        [372.0,740.0,1112.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0],
        [1.0,0.27130616347664,0.2080260193302727,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0]
    ],
    [ #G4#
        [392.0,784.0,1180.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0],
        [1.0,0.38709121415695547,0.1499354801916873,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0]
    ],
    [ #G4#
        [416.0,832.0,1248.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0],
        [1.0,0.1880759496321301,0.10346097911067359,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0]
    ],
    [ #A4#
        [440.0,880.0,1324.0,1772.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0],
        [1.0,0.8788216931019048,0.35390789118476274,0.1037872378275326,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0]
    ],
    [  #A4#
        [468.0,1404.0,932.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0],
        [1.0,0.23301613839428692,0.1138056232196057,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0]
    ],
    [   #B4
        [496.0,1488.0,988.0,1992.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0],
        [1.0,0.4875696430259741,0.4127521367010433,0.10866790515416987,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0]
    ], #C5
    [
        [522.8740807930285,1047.1767792931419,1574.3367132074247,2110.0683533642164,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0],
        [1.0,0.6985690123320519,0.21896164925134876,0.11471791887378181,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0]
    ],
    [ #C#5
        [554.3036703488937,1111.4645761119568,1671.4827172891896,2237.2153292947614,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0],
        [1.0,0.5728200323200522,0.29146096797417265,0.1848220638453707,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0]
    ],
    [ #D5
        [588.5904953189283,1177.1809906378567,1772.9145744922089,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0],
        [1.0,0.4173770314720934,0.2447372939892643,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0]
    ],
    [ #D#5
        [622.877320288963,1247.1832582850107,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0],
        [1.0,0.31529182091371943,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0]
    ],
    [ #E5
        [660.0213806731672,1321.471379053419,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0],
        [1.0,0.34784727762732415,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0]
    ],
    [ #F5
        [698.5940587644561,1402.9025883572515,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0],
        [1.0,0.19256681229557043,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0]
    ],
    [ #F#5
        [742.8812076840843,1484.3337976610837,2237.2153292947614,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0],
        [1.0,0.729834144525748,0.6003000780836274,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0]
    ],
    [  #G5
        [784.3111211895429,1574.3367132074247,2372.9340114678153,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0],
        [1.0,0.3093968737969788,0.12188850045007106,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0]
    ],
    [  #G#5
        [830.0268878162557, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],
        [1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]
    ],
    [ #A5
        [880.0285075642229, 1770.0573390780391, 905.7436262917489, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0,
         0.0, 0.0],
        [1.0, 0.3023353853367236, 0.1733823364404941, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]
    ],
    [ #A5#
        [934.3159804334445, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],
        [1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]
    ],
    [ #B5
        [990.0320710097508, 1987.2072305549254, 974.3172762318183, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0,
         0.0, 0.0],
        [1.0, 0.4150812387396555, 0.1893404852583033, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]
    ],
    [ #C6
        [1048.6053970002267, 2107.2111179500466, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],
        [1.0, 0.4293433838958504, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]
    ],
    [ #C6#
        [1111.4645761119568, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],
        [1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]
    ],
    [ #D6
        [1110.0,1094.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0],
        [1.0,0.19788635953938463,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0]
    ],
    [ #D6#
        [1248.6118759920955, 2510.081311347954, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],
        [1.0, 0.10767430161156798, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]
    ],
    [ #E6
        [1322.8999967605039, 2662.9434060060253, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],
        [1.0, 0.14489441465995836, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]
    ],
    [ #F6
        [1397.1881175289122, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],
        [1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]
    ],
    [  #F6#
        [1482.3337976610837, 2992.954096342609, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],
        [1.0, 0.11066342741054487, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]
    ],
    [ #G6
        [1570.9080955003399, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],
        [1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]
    ],
    [ #G6#
        [1666.1968641679352, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],
        [1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]
    ],
    [ #A6
        [1770.0573390780391, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],
        [1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]
    ],
    [ #A6#
        [1880.0609025235672, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],
        [1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]
    ],
    [   #B6
        [1988.63584826201, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],
        [1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]
    ]

]
frequency = np.array(frequency)
#print(frequency.shape)
frequency_spectrum('G3.wav',frequency)





